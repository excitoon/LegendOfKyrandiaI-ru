# `FORESTA.EMC`.

strings = {
	s000: 'CHALICE1.WSA',
	s001: 'CHALICE2.WSA',
	s_its_stuck: ' It\'s stuck. ',
	s_thats_spooky: ' That\'s spooky! ',
	s_what_holds_it_there: 'What holds it there?',
	s_title: 'Dark forest',
	s_royal_chalice_doing_here: 'What\'s the Royal Chalice doing here?',
	s_something_strange_happening_here: 'Something strange is happening here!',
	s_think_im_getting_rash: 'I think I\'m getting a rash.',
	s_id_swear_some_these: 'I\'d swear some of these trees look just like the ones in our backyard!',
	s_think_ill_try_chalice: 'I think I\'ll try it on the chalice.',
	s011: 'STEAL1.WSA',
	s_what_was_that: 'What was THAT?',
	s_hey: '   Hey!   ',
	s_bring_that_back: 'Bring that back!',
	s_aaugh: ' Aaugh... ',
	s_great: ' Great... ',
	s_now_ive_got_pitch: 'Now I\'ve got pitch all over me!',
}

globals = [global_0, global_1, global_2, global_3, global_4, global_5, global_6]

label func_0
instr_5(2, 0x01)
instr_7(2, 0x01)
binary(2, 0x07)
instr_5(2, 0x01)
instr_7(2, 0x01)
instr_7(2, 0x03)
binary(2, 0x08)
binary(2, 0x05)
binary(2, 0x00)
instr_5(2, 0x02)
instr_7(2, 0x02)
binary(2, 0x07)
binary(2, 0x00)
instr_5(2, 0x02)
instr_7(2, 0x02)
instr_7(2, 0x04)
binary(2, 0x08)
binary(2, 0x05)
binary(2, 0x00)
if cond:
	return 0x01

return 0x00
return acc

label func_28
instr_5(2, 0x01)
call_56(0x00)
instr_2(2, 0x00)
binary(2, 0x05)
if cond:
	call_58(0xff, 0x05, 0x00)

else:
	call_58(0xff, 0x03, 0x00)

return 0x00
return acc
instr_7(2, 0x01)
call_56(0x00)
instr_2(2, 0x00)
binary(2, 0x05)
if cond:
	call_58(0xff, 0x05, 0x00)

else:
	call_58(0xff, 0x03, 0x00)

return 0x00
return acc

label global_0
instr_13(2, 0x01)
call_152(0x01)
instr_5(2, 0x00)
push(2, 0x00)
push(2, 0x10)
binary(2, 0x08)
push(2, 0x01)
binary(2, 0x08)
push(2, 0x13)
binary(2, 0x08)
push(2, 0x01)
binary(2, 0x08)
push(2, 0x09)
binary(2, 0x08)
binary(2, 0x02)
if cond:
	call_143(0x60, 0x28, 0x20, u16(0x0080))
	call_143(0x70, 0x30, 0x10, u16(0x0080))
	call_143(0x46, u16(0x0130), 0x30, 0x08)

instr_5(2, 0x00)
push(2, 0x00)
push(2, 0x10)
binary(2, 0x08)
push(2, 0x01)
binary(2, 0x08)
push(2, 0x13)
binary(2, 0x08)
push(2, 0x01)
binary(2, 0x08)
push(2, 0x47)
binary(2, 0x08)
push(2, 0x01)
binary(2, 0x08)
push(2, 0x08)
binary(2, 0x08)
push(2, 0x01)
binary(2, 0x08)
push(2, 0x44)
binary(2, 0x08)
push(2, 0x01)
binary(2, 0x08)
push(2, 0x0b)
binary(2, 0x08)
push(2, 0x01)
binary(2, 0x08)
push(2, 0x02)
binary(2, 0x08)
binary(2, 0x02)
instr_5(2, 0x00)
push(2, 0x00)
push(2, 0x10)
binary(2, 0x08)
push(2, 0x01)
binary(2, 0x08)
push(2, 0x13)
binary(2, 0x08)
push(2, 0x01)
binary(2, 0x08)
push(2, 0x47)
binary(2, 0x08)
push(2, 0x01)
binary(2, 0x08)
push(2, 0x08)
binary(2, 0x08)
push(2, 0x01)
binary(2, 0x08)
push(2, 0x44)
binary(2, 0x08)
push(2, 0x01)
binary(2, 0x08)
push(2, 0x0b)
binary(2, 0x08)
push(2, 0x01)
binary(2, 0x08)
push(2, 0x03)
binary(2, 0x08)
binary(2, 0x02)
binary(2, 0x01)
if cond:
	call_50(0x11, u16(0x00e7), 0x01)

instr_5(2, 0x00)
push(2, 0x00)
push(2, 0x10)
binary(2, 0x08)
push(2, 0x01)
binary(2, 0x08)
push(2, 0x13)
binary(2, 0x08)
push(2, 0x01)
binary(2, 0x08)
push(2, 0x09)
binary(2, 0x08)
binary(2, 0x02)
call_4(u16(0x00a4))
instr_2(2, 0x00)
unary(2, 0x00)
binary(2, 0x00)
if cond:
	call_16(0x01)
	call_61(0x01, 0x00)
	instr_2(2, 0x00)
	instr_9(2, 0x0f)

instr_5(2, 0x00)
push(2, 0x00)
push(2, 0x0c)
binary(2, 0x08)
binary(2, 0x02)
if cond:
	call_4(0x2d)
	instr_2(2, 0x00)
	call_4(0x08)
	instr_2(2, 0x00)
	binary(2, 0x00)
	ifnot(1, label_248)
	call_102(0x53, add(0x00, 0x0d))
	call_102(0x2a, add(0x00, 0x07))
	call_5(0x07)
	call_6(0x38)

label label_248
call_4(0x41)
instr_2(2, 0x00)
call_4(0x45)
instr_2(2, 0x00)
binary(2, 0x00)
if cond:

call_90(0x00)
instr_2(2, 0x00)
instr_10(2, 0x01)
leave 0x01
return 0x00
leave 0x01
return acc

label global_1
instr_13(2, 0x03)
push(2, 0x01)
instr_9(2, 0x03)
instr_5(2, 0x00)
push(2, 0x00)
push(2, 0x10)
binary(2, 0x08)
push(2, 0x01)
binary(2, 0x08)
push(2, 0x13)
binary(2, 0x08)
push(2, 0x01)
binary(2, 0x08)
push(2, 0x09)
binary(2, 0x08)
binary(2, 0x02)
call_4(u16(0x00a4))
instr_2(2, 0x00)
unary(2, 0x00)
binary(2, 0x00)
if cond:
	func_0(add(sub(0x4c, 0x2c), 0x01), add(sub(u16(0x00a3), u16(0x008b)), 0x01), 0x2c, u16(0x008b))
	instr_2(2, 0x00)
	ifnot(1, label_430)
	call_11(0x01, 0x01, 0x7c, u16(0x0098))
	instr_2(2, 0x00)
	instr_10(2, 0x01)
	instr_6(2, 0x01)
	unary(2, 0x00)
	if cond:
		call(2, call_54)
		call(2, call_38)
		call_65(0x01, 0x03, 0x07, 0x00)
		instr_5(2, 0x0f)
		push(2, 0x00)
		binary(2, 0x02)
		if cond:
			call_41(0x00, 0x00, 0x00, 0x00)
			push16(0x0080)
			instr_10(2, 0x02)
			push(2, 0x20)
			instr_10(2, 0x03)
			push(2, 0x01)
			instr_9(2, 0x0f)

		else:
			call_41(0x00, 0x00, 0x00, 0x01)
			push16(0x0080)
			instr_10(2, 0x02)
			push(2, 0x10)
			instr_10(2, 0x03)
			push(2, 0x00)
			instr_9(2, 0x0f)

		call(2, call_68)
		label label_370
		call(2, call_69)
		instr_2(2, 0x00)
		push(2, 0x00)
		binary(2, 0x02)
		if cond:
			call(2, call_70)
			jmp(4, label_370)

		call_66(0x01)
		call_43(0x01, 0x00, 0x09, arg(0x03), arg(0x02))
		call_42(0x00)
		call_37(0x01)
		call_65(0x01, 0x03, 0x07, 0x00)
		call_4(u16(0x00af))
		instr_2(2, 0x00)
		unary(2, 0x00)
		if cond:
			call_5(u16(0x00af))
			speak(0xfe, 0x00, s_its_stuck)
			speak(0xfe, 0x00, s_thats_spooky)
			speak(0xfe, 0x00, s_what_holds_it_there)

		call(2, call_55)

	leave 0x03
	return acc

label label_430
push(2, 0x00)
instr_9(2, 0x03)
leave 0x03
return acc
leave 0x03
return acc

label global_2
instr_13(2, 0x00)
title(u16(0x00b3), 0x05)
push(2, 0x00)
instr_9(2, 0x03)
return acc  # acc = title(u16(0x00b3), 0x05)
return acc  # acc = title(u16(0x00b3), 0x05)

label global_3
instr_13(2, 0x02)
push(2, 0x00)
instr_10(2, 0x02)
call_65(0x01, 0xff, 0x07, 0x00)
instr_5(2, 0x00)
push(2, 0x00)
push(2, 0x10)
binary(2, 0x08)
push(2, 0x01)
binary(2, 0x08)
push(2, 0x13)
binary(2, 0x08)
push(2, 0x01)
binary(2, 0x08)
push(2, 0x09)
binary(2, 0x08)
binary(2, 0x02)
if cond:
	call_4(u16(0x00a4))
	instr_2(2, 0x00)
	unary(2, 0x00)
	if cond:
		call_24(0x01, 0x01)
		call_150(0x01)
		call_24(0x01, 0x1d)

	call_4(u16(0x00ae))
	instr_2(2, 0x00)
	unary(2, 0x00)
	ifnot(1, label_508)
	speak(0xfe, 0x00, s_royal_chalice_doing_here)
	call_5(u16(0x00ae))
	push(2, 0x01)
	instr_10(2, 0x02)

label label_508
call_4(0x41)
instr_2(2, 0x00)
call_4(0x45)
instr_2(2, 0x00)
binary(2, 0x00)
if cond:
	call_6(0x45)
	call_5(0x53)
	push(2, 0x01)
	instr_10(2, 0x02)

call_90(0x00)
instr_2(2, 0x00)
instr_10(2, 0x01)
instr_5(2, 0x00)
push(2, 0x00)
push(2, 0x0c)
binary(2, 0x08)
binary(2, 0x02)
if cond:
	call_4(u16(0x009d))
	instr_2(2, 0x00)
	unary(2, 0x00)
	ifnot(1, label_578)
	call_119(var(0x00))
	instr_2(2, 0x00)
	push(2, 0x0c)
	binary(2, 0x04)
	ifnot(1, label_578)
	call_21(0x00)
	call_23(0x37)
	call_124(0x68, u16(0x00a5), 0x07)
	call_5(u16(0x009d))
	speak(0xfe, 0x00, s_something_strange_happening_here)
	push(2, 0x01)
	instr_10(2, 0x02)

label label_578
instr_5(2, 0x00)
push(2, 0x00)
push(2, 0x10)
binary(2, 0x08)
push(2, 0x01)
binary(2, 0x08)
push(2, 0x00)
binary(2, 0x08)
binary(2, 0x02)
instr_5(2, 0x00)
push(2, 0x00)
push(2, 0x10)
binary(2, 0x08)
push(2, 0x01)
binary(2, 0x08)
push(2, 0x01)
binary(2, 0x08)
binary(2, 0x02)
binary(2, 0x01)
instr_5(2, 0x00)
push(2, 0x00)
push(2, 0x10)
binary(2, 0x08)
push(2, 0x01)
binary(2, 0x08)
push(2, 0x02)
binary(2, 0x08)
binary(2, 0x02)
binary(2, 0x01)
if cond:
	instr_6(2, 0x02)
	unary(2, 0x00)
	call_4(u16(0x00bf))
	instr_2(2, 0x00)
	unary(2, 0x00)
	binary(2, 0x00)
	call(2, call_18)
	instr_2(2, 0x00)
	push(2, 0x3c)
	binary(2, 0x0b)
	push(2, 0x03)
	binary(2, 0x0e)
	push(2, 0x03)
	binary(2, 0x02)
	binary(2, 0x00)
	ifnot(1, label_638)
	call_5(u16(0x00bf))
	speak(0xfe, 0x00, s_think_im_getting_rash)

label label_638
instr_5(2, 0x00)
push(2, 0x00)
push(2, 0x10)
binary(2, 0x08)
push(2, 0x01)
binary(2, 0x08)
push(2, 0x13)
binary(2, 0x08)
push(2, 0x01)
binary(2, 0x08)
push(2, 0x2c)
binary(2, 0x08)
binary(2, 0x07)
instr_5(2, 0x00)
push(2, 0x00)
push(2, 0x10)
binary(2, 0x08)
push(2, 0x01)
binary(2, 0x08)
push(2, 0x13)
binary(2, 0x08)
push(2, 0x01)
binary(2, 0x08)
push(2, 0x47)
binary(2, 0x08)
binary(2, 0x05)
binary(2, 0x00)
if cond:
	instr_6(2, 0x02)
	unary(2, 0x00)
	call_4(u16(0x00c8))
	instr_2(2, 0x00)
	unary(2, 0x00)
	binary(2, 0x00)
	call(2, call_18)
	instr_2(2, 0x00)
	push(2, 0x3c)
	binary(2, 0x0b)
	push(2, 0x03)
	binary(2, 0x0e)
	push(2, 0x03)
	binary(2, 0x02)
	binary(2, 0x00)
	ifnot(1, label_696)
	call_5(u16(0x00c8))
	speak(0xfe, 0x00, s_id_swear_some_these)

label label_696
push(2, 0x00)
instr_9(2, 0x03)
leave 0x02
return acc
leave 0x02
return acc

label global_4
instr_13(2, 0x00)
push(2, 0x01)
instr_9(2, 0x03)
instr_5(2, 0x06)
push(2, 0x04)
binary(2, 0x02)
if cond:
	instr_5(2, 0x00)
	push(2, 0x00)
	push(2, 0x10)
	binary(2, 0x08)
	push(2, 0x01)
	binary(2, 0x08)
	push(2, 0x13)
	binary(2, 0x08)
	push(2, 0x01)
	binary(2, 0x08)
	push(2, 0x09)
	binary(2, 0x08)
	binary(2, 0x02)
	ifnot(1, label_934)
	call_4(u16(0x00a4))
	instr_2(2, 0x00)
	unary(2, 0x00)
	ifnot(1, label_934)
	call(2, call_54)
	call_11(0x01, 0x00, 0x78, u16(0x00ec))
	call(2, call_38)
	call_65(0x01, 0x05, 0x07, 0x00)
	speak(0xfe, 0x00, s_think_ill_try_chalice)
	call_41(0x00, 0x00, 0x00, 0x0b)
	call(2, call_68)
	label label_760
	call(2, call_69)
	instr_2(2, 0x00)
	push(2, 0x00)
	binary(2, 0x02)
	if cond:
		call(2, call_70)
		jmp(4, label_760)

	call_49(0x00)
	call_66(0x01)
	call(2, call_86)
	call_64(0x01, 0x00, 0x09, 0x30, 0x08, 0x0b, 0x00)
	call_23(0x15)
	call_64(0x01, 0x00, 0x09, 0x30, 0x08, 0x25, 0x0c)
	call_23(0x15)
	call_64(0x01, 0x00, 0x09, 0x30, 0x08, 0x33, 0x26)
	call_64(0x01, 0x00, 0x08, 0x30, 0x08, 0x34, 0x34)
	call_64(0x01, 0x00, 0x07, 0x30, 0x08, 0x35, 0x35)
	call_64(0x01, 0x00, 0x06, 0x30, 0x08, 0x36, 0x36)
	call_64(0x01, 0x00, 0x05, 0x30, 0x08, 0x37, 0x37)
	call_23(0x0a)
	call_64(0x01, 0x00, 0x04, 0x30, 0x08, 0x38, 0x38)
	call_23(0x32)
	call_24(0x01, 0x00)
	call_64(0x01, 0x00, 0x03, 0x30, 0x08, 0x39, 0x39)
	call_64(0x01, 0x00, 0x02, 0x30, 0x08, 0x3a, 0x3a)
	call_64(0x01, 0x00, 0x02, 0x30, 0x08, 0x3b, 0x3a)
	call_64(0x01, 0x00, 0x02, 0x30, 0x08, 0x69, 0x3c)
	call_65(0x01, 0x03, 0x07, 0x00)
	speak(0xfe, 0x00, s_what_was_that)
	speak(0xfe, 0x00, s_hey)
	speak(0xfe, 0x00, s_bring_that_back)
	call_42(0x00)
	call_5(u16(0x00a4))
	call_5(u16(0x00bc))
	return call_55()

label label_934
push(2, 0x00)
instr_9(2, 0x03)
return acc
return acc

label global_5
instr_13(2, 0x00)
instr_5(2, 0x00)
push(2, 0x00)
push(2, 0x10)
binary(2, 0x08)
push(2, 0x01)
binary(2, 0x08)
push(2, 0x13)
binary(2, 0x08)
push(2, 0x01)
binary(2, 0x08)
push(2, 0x09)
binary(2, 0x08)
binary(2, 0x02)
if cond:
	call_24(0x00, 0x15)

push(2, 0x00)
instr_9(2, 0x03)
return acc
return acc

label global_6
instr_13(2, 0x00)
instr_5(2, 0x04)
push(2, 0x19)
binary(2, 0x02)
call_4(u16(0x00cd))
instr_2(2, 0x00)
unary(2, 0x00)
binary(2, 0x00)
if cond:
	func_28()
	call_149(0x01)
	speak(0xfe, 0x00, s_aaugh)
	speak(0xfe, 0x00, s_great)
	speak(0xfe, 0x00, s_now_ive_got_pitch)
	call_149(0x00)
	call_5(u16(0x00cd))

push(2, 0x00)
instr_9(2, 0x03)
return acc
return acc
