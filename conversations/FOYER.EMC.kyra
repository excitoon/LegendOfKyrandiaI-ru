# `FOYER.EMC`.

strings = {
	s000: 'PUNCH1.WSA',
	s001: 'PUNCH2.WSA',
	s002: 'PUNCH3.WSA',
	s_my_you_are_a: 'My, you are a wicked boy!',
	s_gall_show_break_rule: 'What gall you show to break my rule!',
	s_do_wish_fight_now: 'Do you wish to fight me now?',
	s_heed_mommys_plea: 'Or will you heed your mommy\'s plea?',
	s_did_grandpa_knit_vest: 'Did your Grandpa knit that vest?',
	s_dont_push_old_man: 'Don\'t push, old man!',
	s_im_warning_you: 'I\'m warning you!',
	s_youre_warning_me: 'You\'re warning ME?',
	s_at_last_a_joke: 'At last, a joke!',
	s_move_aside_im_going: 'Move aside, I\'m going in!',
	s_told_still_must: 'I told you no, but still you must?',
	s_dont_push_again_old: 'Don\'t push again old man!',
	s_an_ultimatum: 'An ultimatum?',
	s_heres_the_push: 'Here\'s the push!',
	s_jerk: 'Jerk.',
	s_more_room_pillow: 'There\'s no more room on the pillow.',
	s_hope_correct_spot_lay: 'I hope this is the correct spot to lay the sceptre.',
	s_wonder_if_crown_belongs: 'I wonder if this is where the crown belongs?',
	s_think_chalice_probably_belongs: 'I think the chalice probably belongs on this pillow.',
	s_red_velvet: 'Red velvet!',
	s_that_should_do_it: 'That should do it...',
	s024: 'FOYER.WSA',
	s_excellent: 'Excellent!',
	s_all_royal_vestments_placed: 'All the royal vestments are placed...',
	s_but_are_they_in: '...but are they in the correct order?',
	s_wish_had_sledge_hammer: 'Wish I had a sledge-hammer!',
	s_course_locked_too: 'Of course, it\'s locked too!',
	s_must_kyra_vault: 'This must be the Kyra-Vault!',
	s_title: 'The Royal Foyer',
}

globals = [global_0, global_1, global_2, global_3, global_4, global_5, global_6]

label func_0
instr_5(2, 0x01)
instr_7(2, 0x01)
binary(2, 0x07)
instr_5(2, 0x01)
instr_7(2, 0x01)
instr_7(2, 0x03)
binary(2, 0x08)
binary(2, 0x05)
binary(2, 0x00)
instr_5(2, 0x02)
instr_7(2, 0x02)
binary(2, 0x07)
binary(2, 0x00)
instr_5(2, 0x02)
instr_7(2, 0x02)
instr_7(2, 0x04)
binary(2, 0x08)
binary(2, 0x05)
binary(2, 0x00)
if cond:
	return 0x01

return 0x00
return acc

label func_28
instr_5(2, 0x01)
call_56(0x00)
instr_2(2, 0x00)
binary(2, 0x05)
if cond:
	call_58(0xff, 0x05, 0x00)

else:
	call_58(0xff, 0x03, 0x00)

return 0x00
return acc
instr_7(2, 0x01)
call_56(0x00)
instr_2(2, 0x00)
binary(2, 0x05)
if cond:
	call_58(0xff, 0x05, 0x00)

else:
	call_58(0xff, 0x03, 0x00)

return 0x00
return acc
return call_64(local(0x01), 0x00, 0x07, 0x08, u16(0x00a8), 0x17, 0x15)

label func_85
call(2, call_54)
call(2, call_38)
call_58(0x07, 0x03, 0x00)
call_41(0x00, 0x00, 0x01, 0x00)
call_64(0x01, 0x01, 0x07, 0x1d, u16(0x00a8), 0x02, 0x00)
call_23(0x1d)
call_64(0x01, 0x01, 0x07, 0x1d, u16(0x00a8), 0x15, 0x03)
call_42(0x01)
call_41(0x01, 0x00, 0x02, 0x01)
call_41(0x00, 0xff, 0x03, 0x02)
call_64(0x01, 0x02, 0x07, 0x25, u16(0x00a8), 0x01, 0x00)
call_66(0x02)
call_66(0x03)
call_24(0x01, 0x30)
tell(0x72, 0x20, u16(0x00dc), s_my_you_are_a)
call_64(0x02, 0x02, 0x07, 0x25, u16(0x00a8), 0x0a, 0x02)
call_64(0x02, 0x02, 0x07, 0x25, u16(0x00a8), 0x04, 0x04)
call_33(0x01)
call(2, call_53)
tell(0x72, 0x20, u16(0x00dc), s_gall_show_break_rule)
call_64(0x03, 0x02, 0x07, 0x25, u16(0x00a8), 0x0a, 0x02)
call_64(0x02, 0x02, 0x07, 0x25, u16(0x00a8), 0x04, 0x04)
call_33(0x01)
call(2, call_53)
tell(0x72, 0x20, u16(0x00dc), s_do_wish_fight_now)
call_64(0x02, 0x02, 0x07, 0x25, u16(0x00a8), 0x0a, 0x02)
call_64(0x02, 0x02, 0x07, 0x25, u16(0x00a8), 0x04, 0x04)
call_33(0x01)
call(2, call_53)
tell(0x72, 0x20, u16(0x00dc), s_heed_mommys_plea)
call_64(0x03, 0x02, 0x07, 0x25, u16(0x00a8), 0x0a, 0x02)
call_64(0x02, 0x02, 0x07, 0x25, u16(0x00a8), 0x04, 0x04)
call_33(0x01)
call(2, call_53)
tell(0x72, 0x20, u16(0x00dc), s_did_grandpa_knit_vest)
call_64(0x03, 0x02, 0x07, 0x25, u16(0x00a8), 0x0a, 0x02)
call_64(0x02, 0x02, 0x07, 0x25, u16(0x00a8), 0x04, 0x04)
call(2, call_53)
call_64(0x01, 0x02, 0x07, 0x25, u16(0x00a8), 0x16, 0x0b)
tell(0x0f, 0x20, u16(0x00bc), s_dont_push_old_man)
call_64(0x01, 0x02, 0x07, 0x25, u16(0x00a8), 0x23, 0x17)
call_33(0x02)
call(2, call_53)
tell(0x0f, 0x20, u16(0x00bc), s_im_warning_you)
call_64(0x01, 0x02, 0x07, 0x25, u16(0x00a8), 0x23, 0x17)
call_33(0x01)
call(2, call_53)
call_64(0x01, 0x02, 0x07, 0x25, u16(0x00a8), 0x25, 0x23)
tell(0x72, 0x20, u16(0x00dc), s_youre_warning_me)
call_64(0x01, 0x02, 0x07, 0x25, u16(0x00a8), 0x2e, 0x26)
call_64(0x01, 0x02, 0x07, 0x25, u16(0x00a8), 0x28, 0x28)
call_33(0x01)
call(2, call_53)
tell(0x72, 0x20, u16(0x00dc), s_at_last_a_joke)
call_64(0x01, 0x02, 0x07, 0x25, u16(0x00a8), 0x2e, 0x26)
call_64(0x01, 0x02, 0x07, 0x25, u16(0x00a8), 0x28, 0x28)
call_33(0x01)
call(2, call_53)
call_64(0x01, 0x02, 0x07, 0x25, u16(0x00a8), 0x39, 0x2f)
tell(0x0f, 0x20, u16(0x00bc), s_move_aside_im_going)
call_64(0x01, 0x02, 0x07, 0x25, u16(0x00a8), 0x23, 0x17)
call_33(0x02)
call(2, call_53)
call_64(0x01, 0x02, 0x07, 0x25, u16(0x00a8), 0x25, 0x23)
tell(0x72, 0x20, u16(0x00dc), s_told_still_must)
call_64(0x02, 0x02, 0x07, 0x25, u16(0x00a8), 0x2e, 0x26)
call_64(0x01, 0x02, 0x07, 0x25, u16(0x00a8), 0x28, 0x28)
call_33(0x02)
call(2, call_53)
call_64(0x01, 0x02, 0x07, 0x25, u16(0x00a8), 0x39, 0x2f)
tell(0x0f, 0x20, u16(0x00bc), s_dont_push_again_old)
call_64(0x01, 0x02, 0x07, 0x25, u16(0x00a8), 0x22, 0x17)
call_33(0x01)
call(2, call_53)
call_64(0x01, 0x02, 0x07, 0x25, u16(0x00a8), 0x25, 0x23)
tell(0x72, 0x20, u16(0x00dc), s_an_ultimatum)
call_64(0x02, 0x02, 0x07, 0x25, u16(0x00a8), 0x2e, 0x26)
call_64(0x01, 0x02, 0x07, 0x25, u16(0x00a8), 0x28, 0x28)
call_33(0x01)
call(2, call_53)
tell(0x72, 0x20, u16(0x00dc), s_heres_the_push)
call_64(0x02, 0x02, 0x07, 0x25, u16(0x00a8), 0x2e, 0x26)
call_64(0x01, 0x02, 0x07, 0x25, u16(0x00a8), 0x28, 0x28)
call_64(0x01, 0x02, 0x07, 0x25, u16(0x00a8), 0x38, 0x2f)
call(2, call_53)
call_64(0x01, 0x03, 0x07, 0x08, u16(0x00a8), 0x06, 0x00)
call_23(0x1a)
call_64(0x01, 0x03, 0x07, 0x08, u16(0x00a8), 0x09, 0x07)
call_23(0x1a)
call_64(0x01, 0x03, 0x07, 0x08, u16(0x00a8), 0x0b, 0x0a)
call_23(0x43)
call_64(0x01, 0x03, 0x07, 0x08, u16(0x00a8), 0x0d, 0x0c)
call_23(0x43)
call_64(0x01, 0x03, 0x07, 0x08, u16(0x00a8), 0x0f, 0x0e)
tell(0x0f, 0x20, u16(0x00e0), s_jerk)
call_64(0x01, 0x02, 0x07, 0x25, u16(0x00a8), 0x3e, 0x3a)
call_24(0x01, 0x01)
call_33(0x02)
call(2, call_53)
call_37(0x02)
call_37(0x03)
call_42(0x03)
call_42(0x02)
call_49(0x00)
call_3(0x02, 0x00, 0x2e, u16(0x00e3), 0x1a)
call_67(0x5a, u16(0x00e4), 0x00)
call(2, call_86)
call_65(0x01, 0xff, 0x07, 0x00)
call_13(0x00, 0x2e, u16(0x00e3), 0x1a)
call_24(0x01, 0x27)
call_9(sub(add(0x41, 0x39), 0x01), sub(add(u16(0x010e), 0x32), 0x01), 0x41, u16(0x010e))
call(2, call_55)
call(2, call_55)
return call_11(0x01, 0x00, 0x58, u16(0x0140))
return acc  # acc = call_11(0x01, 0x00, 0x58, u16(0x0140))

label func_775
instr_7(2, 0x01)
push(2, 0x68)
binary(2, 0x02)
instr_7(2, 0x01)
push(2, 0x67)
binary(2, 0x02)
binary(2, 0x01)
instr_7(2, 0x01)
push(2, 0x18)
binary(2, 0x02)
binary(2, 0x01)
if cond:
	return 0x01

return 0x00
return acc

label func_795
instr_13(2, 0x01)
func_28()
instr_5(2, 0x04)
push(2, 0x00)
binary(2, 0x07)
if cond:
	call_141(local(0x01))
	instr_2(2, 0x00)
	push(2, 0x00)
	binary(2, 0x07)
	if cond:
		speak(0xfe, 0x00, s_more_room_pillow)

	else:
		call(2, call_54)
		instr_5(2, 0x04)
		push(2, 0x68)
		binary(2, 0x02)
		instr_5(2, 0x04)
		push(2, 0x67)
		binary(2, 0x02)
		binary(2, 0x01)
		instr_5(2, 0x04)
		push(2, 0x18)
		binary(2, 0x02)
		binary(2, 0x01)
		if cond:
			call_23(0x14)
			call_13(0x00, 0x08, local(0x04), add(0x14, local(0x01)))

		call_98(0x00, 0x00, local(0x03), local(0x02), var(0x04))
		call_23(0x32)
		call(2, call_20)
		call(2, call_55)
		call_142(var(0x04), local(0x01))
		instr_5(2, 0x04)
		push(2, 0x68)
		binary(2, 0x02)
		if cond:
			speak(0xfe, 0x00, s_hope_correct_spot_lay)

		instr_5(2, 0x04)
		push(2, 0x67)
		binary(2, 0x02)
		if cond:
			speak(0xfe, 0x00, s_wonder_if_crown_belongs)

		instr_5(2, 0x04)
		push(2, 0x18)
		binary(2, 0x02)
		ifnot(1, 0x0378)
		speak(0xfe, 0x00, s_think_chalice_probably_belongs)

else:
	call_141(local(0x01))
	instr_2(2, 0x00)
	push(2, 0x00)
	binary(2, 0x07)
	if cond:
		call(2, call_54)
		call_141(local(0x01))
		call_14(acc)
		call_13(0x00, 0x08, local(0x04), add(0x17, local(0x01)))
		call(2, call_55)
		call_142(0xff, local(0x01))

	else:
		speak(0xfe, 0x00, s_red_velvet)

call_141(0x00)
instr_2(2, 0x00)
push(2, 0x68)
binary(2, 0x02)
call_141(0x01)
instr_2(2, 0x00)
push(2, 0x67)
binary(2, 0x02)
binary(2, 0x00)
call_141(0x02)
instr_2(2, 0x00)
push(2, 0x18)
binary(2, 0x02)
binary(2, 0x00)
if cond:
	call_24(0x01, 0x01)
	call(2, call_54)
	call(2, call_38)
	call_11(0x01, 0x00, 0x5a, u16(0x00c0))
	call_58(0x07, 0x05, 0x00)
	speak(0xfe, 0x00, s_that_should_do_it)
	call_24(0x01, 0x2f)
	call_41(0x01, 0x00, 0x00, 0x18)
	push(2, 0x00)
	instr_10(2, 0x01)
	label label_980
	instr_6(2, 0x01)
	push(2, 0x06)
	binary(2, 0x05)
	if cond:
		call_23(0x23)
		call_64(0x01, 0x00, 0x0a, 0x08, u16(0x0108), arg(0x01), arg(0x01))
		instr_6(2, 0x01)
		push(2, 0x01)
		binary(2, 0x08)
		instr_10(2, 0x01)
		jmp(4, label_980)

	call_58(0x07, 0x03, 0x00)
	label label_1008
	instr_6(2, 0x01)
	push(2, 0x13)
	binary(2, 0x05)
	if cond:
		call_23(0x23)
		call_64(0x01, 0x00, 0x0c, 0x08, u16(0x0108), arg(0x01), arg(0x01))
		instr_6(2, 0x01)
		push(2, 0x01)
		binary(2, 0x08)
		instr_10(2, 0x01)
		jmp(4, label_1008)

	call_49(0x00)
	call_63(0x00, 0x00, 0x08, u16(0x0108), 0x13)
	call(2, call_86)
	call_42(0x00)
	speak(0xfe, 0x00, s_excellent)
	func_85()
	call(2, call_55)

else:
	call_141(0x00)
	func_775(acc)
	instr_2(2, 0x00)
	call_141(0x01)
	func_775(acc)
	instr_2(2, 0x00)
	binary(2, 0x00)
	call_141(0x02)
	func_775(acc)
	instr_2(2, 0x00)
	binary(2, 0x00)
	ifnot(1, label_1093)
	speak(0xfe, 0x00, s_all_royal_vestments_placed)
	speak(0xfe, 0x00, s_but_are_they_in)

label label_1093
leave 0x01
return acc
leave 0x01
return acc

label global_0
instr_13(2, 0x01)
call_40(u16(0x0100), 0x58, u16(0x00d9), 0x36)
call_10(sub(add(0x27, 0x0e), 0x01), sub(add(0x50, u16(0x00a1)), 0x01), 0x27, 0x50)
push(2, 0x00)
instr_9(2, 0x0f)
call_143(0x74, 0x28, 0x08, u16(0x0108))
call_143(0x43, 0x48, 0x1d, u16(0x00a8))
call_143(0x35, u16(0x0080), 0x25, u16(0x00a8))
call_143(0x58, u16(0x0080), 0x08, u16(0x00a8))
call_141(0x00)
instr_2(2, 0x00)
instr_10(2, 0x01)
instr_6(2, 0x01)
push(2, 0x00)
binary(2, 0x07)
if cond:
	instr_6(2, 0x01)
	push(2, 0x68)
	binary(2, 0x02)
	instr_6(2, 0x01)
	push(2, 0x67)
	binary(2, 0x02)
	binary(2, 0x01)
	instr_6(2, 0x01)
	push(2, 0x18)
	binary(2, 0x02)
	binary(2, 0x01)
	if cond:
		call_3(0x02, 0x00, 0x08, 0x70, 0x14)

	call_98(0x01, 0x00, sub(0x1c, 0x0f), sub(0x7b, 0x07), arg(0x01))

call_141(0x01)
instr_2(2, 0x00)
instr_10(2, 0x01)
instr_6(2, 0x01)
push(2, 0x00)
binary(2, 0x07)
if cond:
	instr_6(2, 0x01)
	push(2, 0x68)
	binary(2, 0x02)
	instr_6(2, 0x01)
	push(2, 0x67)
	binary(2, 0x02)
	binary(2, 0x01)
	instr_6(2, 0x01)
	push(2, 0x18)
	binary(2, 0x02)
	binary(2, 0x01)
	if cond:
		call_3(0x02, 0x00, 0x08, u16(0x0090), 0x15)

	call_98(0x01, 0x00, sub(0x1c, 0x0f), sub(u16(0x009f), 0x07), arg(0x01))

call_141(0x02)
instr_2(2, 0x00)
instr_10(2, 0x01)
instr_6(2, 0x01)
push(2, 0x00)
binary(2, 0x07)
if cond:
	instr_6(2, 0x01)
	push(2, 0x68)
	binary(2, 0x02)
	instr_6(2, 0x01)
	push(2, 0x67)
	binary(2, 0x02)
	binary(2, 0x01)
	instr_6(2, 0x01)
	push(2, 0x18)
	binary(2, 0x02)
	binary(2, 0x01)
	if cond:
		call_3(0x02, 0x00, 0x08, u16(0x00b2), 0x16)

	call_98(0x01, 0x00, sub(0x1c, 0x0f), sub(u16(0x00c3), 0x07), arg(0x01))

leave 0x01
return 0x00
leave 0x01
return acc

label global_1
instr_13(2, 0x00)
push(2, 0x01)
instr_9(2, 0x03)
func_0(add(sub(0x24, 0x08), 0x01), add(sub(u16(0x008a), 0x6f), 0x01), 0x08, 0x6f)
instr_2(2, 0x00)
if cond:
	return func_795(0x70, sub(0x1c, 0x0f), sub(0x7b, 0x07), 0x00)

func_0(add(sub(0x24, 0x08), 0x01), add(sub(u16(0x00ad), u16(0x0093)), 0x01), 0x08, u16(0x0093))
instr_2(2, 0x00)
if cond:
	return func_795(u16(0x0090), sub(0x1c, 0x0f), sub(u16(0x009f), 0x07), 0x01)

func_0(add(sub(0x24, 0x08), 0x01), add(sub(u16(0x00d0), u16(0x00b6)), 0x01), 0x08, u16(0x00b6))
instr_2(2, 0x00)
if cond:
	return func_795(u16(0x00b2), sub(0x1c, 0x0f), sub(u16(0x00c3), 0x07), 0x02)

func_0(0x42, 0x18, 0x0f, u16(0x010e))
instr_2(2, 0x00)
func_0(0x2a, 0x10, 0x4d, 0x1c)
instr_2(2, 0x00)
binary(2, 0x01)
if cond:
	instr_5(2, 0x04)
	push(2, 0xff)
	binary(2, 0x02)
	ifnot(1, label_1449)
	func_28()
	call_4(0x0b)
	instr_2(2, 0x00)
	if cond:
		speak(0xfe, 0x00, s_wish_had_sledge_hammer)

	else:
		instr_5(2, 0x0f)
		if cond:
			speak(0xfe, 0x00, s_course_locked_too)
			call_5(0x0b)

		else:
			speak(0xfe, 0x00, s_must_kyra_vault)
			push(2, 0x01)
			instr_9(2, 0x0f)

	return acc  # acc = speak(...)

label label_1449
push(2, 0x00)
instr_9(2, 0x03)
return acc
return acc

label global_2
instr_13(2, 0x00)
title(u16(0x00b3), 0x1f)
push(2, 0x00)
instr_9(2, 0x03)
return acc  # acc = title(u16(0x00b3), 0x1f)
return acc  # acc = title(u16(0x00b3), 0x1f)

label global_3
instr_13(2, 0x00)
call_65(0x01, 0xff, 0x07, 0x00)
push(2, 0x00)
instr_9(2, 0x03)
return acc  # acc = call_65(0x01, 0xff, 0x07, 0x00)
return acc  # acc = call_65(0x01, 0xff, 0x07, 0x00)

label global_4
instr_13(2, 0x00)
push(2, 0x00)
instr_9(2, 0x03)
return acc
return acc

label global_5
instr_13(2, 0x00)
push(2, 0x00)
instr_9(2, 0x03)
return acc
return acc

label global_6
instr_13(2, 0x00)
push(2, 0x00)
instr_9(2, 0x03)
return acc
return acc
